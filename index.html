<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <title>Restaurant Slot Machine (Image Version)</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <style>
    body {
      font-family: system-ui, sans-serif;
      margin: 0;
      padding: 1rem;
      text-align: center;
      background: linear-gradient(to bottom, #FFE8F0 0 55%, #E8F3FF 55% 100%);
    }
    h1 { margin-top: 0; font-size: 1.6rem; }

    .slot-container {
      display: grid;
      grid-template-columns: 1fr;
      gap: 1rem;
      max-width: 980px;
      margin: 0 auto;
    }
    @media (min-width: 800px) {
      .slot-container {
        grid-template-columns: repeat(4, 1fr);
      }
    }

    .reel {
      background: #fff;
      border-radius: 16px;
      padding: 0.8rem;
      box-shadow: 0 4px 10px rgba(0,0,0,0.1);
    }
    .reel.main,
    .reel.drink,
    .reel.dessert { background: #fff7fb; }
    .reel.price   { background: #f3fbff; }

    .reel h2 {
      margin: 0 0 0.4rem;
      font-size: 1.1rem;
    }

    .slot-frame {
      border: 3px solid #ccc;
      border-radius: 12px;
      background: #fafafa;
      width: 100%;
      aspect-ratio: 1 / 1;
      display: flex;
      align-items: center;
      justify-content: center;
      overflow: hidden;
      margin-bottom: 0.4rem;
    }
    .slot-frame img {
      max-width: 100%;
      max-height: 100%;
      object-fit: contain;
    }

    .slot-text {
      font-size: 0.9rem;
      line-height: 1.3;
      white-space: pre-line;
      min-height: 2.2em;
    }

    #priceBox {
      border: 3px solid #ccc;
      border-radius: 12px;
      padding: 0.8rem;
      background: #fafafa;
      height: 4.2em;
      display: flex;
      align-items: center;
      justify-content: center;
      white-space: pre-line;
      line-height: 1.3;
      margin-bottom: 0.4rem;
      font-weight: bold;
    }

    button {
      padding: 0.6rem 1.2rem;
      border-radius: 999px;
      border: none;
      cursor: pointer;
      font-size: 1rem;
      font-weight: bold;
      color: #222;
      box-shadow: 0 3px 6px rgba(0,0,0,0.2);
      margin-top: 0.2rem;
    }
    #spinAllBtn { background: #b8f2e6; width: 100%; max-width: 260px; }
    .hint {
      font-size: 0.8rem;
      color: #555;
      margin-top: 0.4rem;
    }
  </style>
</head>
<body>

<h1>Restaurant Slot Machine</h1>

<button id="spinAllBtn">üé∞ SPIN ALL</button>
<p class="hint">
  I'd like ÔΩû.Ôºà„Ç¢„Ç§„Éâ„Ç•„É©„Ç§„ÇØ ÔΩûÔºâ / It's ÔΩû yen.Ôºà„Ç§„ÉÉ„ÉÑ ÔΩû „Ç®„É≥Ôºâ
</p>

<div class="slot-container">
  <!-- „É°„Ç§„É≥„Éá„Ç£„ÉÉ„Ç∑„É• -->
  <div class="reel main">
    <h2>üçΩ Main</h2>
    <div class="slot-frame">
      <img id="foodImg" src="" alt="main dish">
    </div>
    <div class="slot-text" id="foodText">-</div>
  </div>

  <!-- „Éâ„É™„É≥„ÇØ -->
  <div class="reel drink">
    <h2>ü•§ Drink</h2>
    <div class="slot-frame">
      <img id="drinkImg" src="" alt="drink">
    </div>
    <div class="slot-text" id="drinkText">-</div>
  </div>

  <!-- „Éá„Ç∂„Éº„Éà -->
  <div class="reel dessert">
    <h2>üç∞ Dessert</h2>
    <div class="slot-frame">
      <img id="dessertImg" src="" alt="dessert">
    </div>
    <div class="slot-text" id="dessertText">-</div>
  </div>

  <!-- ‰ºöË®à -->
  <div class="reel price">
    <h2>üí¥ Price</h2>
    <div id="priceBox">-</div>
    <div class="slot-text" id="priceReading"> </div>
  </div>
</div>

<script>
/* ========= ÂäπÊûúÈü≥ ========= */
let audioCtx = null;
function initAudio() {
  if (!audioCtx) audioCtx = new (window.AudioContext||window.webkitAudioContext)();
}
function playKorokoro() {
  initAudio();
  const ctx = audioCtx;
  const o = ctx.createOscillator();
  const g = ctx.createGain();
  o.type = "square";
  o.frequency.value = 300;
  g.gain.setValueAtTime(0.001, ctx.currentTime);
  g.gain.exponentialRampToValueAtTime(0.15, ctx.currentTime + 0.02);
  g.gain.exponentialRampToValueAtTime(0.001, ctx.currentTime + 0.08);
  o.connect(g); g.connect(ctx.destination);
  o.start(); o.stop(ctx.currentTime + 0.1);
}
function playChiin() {
  initAudio();
  const ctx = audioCtx;
  const o1 = ctx.createOscillator();
  const g1 = ctx.createGain();
  o1.type = "sine"; o1.frequency.value = 660;
  const o2 = ctx.createOscillator();
  const g2 = ctx.createGain();
  o2.type = "sine"; o2.frequency.value = 1320;
  const t = ctx.currentTime;
  g1.gain.setValueAtTime(0.001, t);
  g1.gain.exponentialRampToValueAtTime(0.4, t + 0.03);
  g1.gain.exponentialRampToValueAtTime(0.001, t + 0.8);
  g2.gain.setValueAtTime(0.001, t);
  g2.gain.exponentialRampToValueAtTime(0.12, t + 0.03);
  g2.gain.exponentialRampToValueAtTime(0.001, t + 0.8);
  o1.connect(g1); g1.connect(ctx.destination);
  o2.connect(g2); g2.connect(ctx.destination);
  o1.start(t); o1.stop(t + 1);
  o2.start(t); o2.stop(t + 1);
}

/* ========= „Ç´„Çø„Ç´„ÉäË™≠„Åø ========= */
const reading = {
  "rice":"„É©„Ç§„Çπ","rice ball":"„É©„Ç§„Çπ„Éú„Éº„É´","curry and rice":"„Ç´„É¨„Éº„Ç¢„É≥„Éâ„É©„Ç§„Çπ",
  "grilled eel":"„Ç∞„É™„É´„Éâ„Ç§„Éº„É´","grilled fish":"„Ç∞„É™„É´„Éâ„Éï„Ç£„ÉÉ„Ç∑„É•","bread":"„Éñ„É¨„ÉÉ„Éâ",
  "sandwich":"„Çµ„É≥„Éâ„Ç¶„Ç£„ÉÉ„ÉÅ","pancake":"„Éë„É≥„Ç±„Éº„Ç≠","pizza":"„Éî„Ç∂","hamburger":"„Éè„É≥„Éê„Éº„Ç¨„Éº",
  "hot dog":"„Éõ„ÉÉ„Éà„Éâ„ÉÉ„Ç∞","French fries":"„Éï„É¨„É≥„ÉÅ„Éï„É©„Ç§","fried chicken":"„Éï„É©„Ç§„Éâ„ÉÅ„Ç≠„É≥",
  "sausage":"„ÇΩ„Éº„Çª„Éº„Ç∏","steak":"„Çπ„ÉÜ„Éº„Ç≠","omelet":"„Ç™„É†„É¨„ÉÑ","spaghetti":"„Çπ„Éë„Ç≤„ÉÜ„Ç£",
  "pie":"„Éë„Ç§","salad":"„Çµ„É©„ÉÄ","soup":"„Çπ„Éº„Éó","fried noodles":"„Éï„É©„Ç§„Éâ„Éå„Éº„Éâ„É´",
  "ramen":"„É©„Éº„É°„É≥","soba":"„ÇΩ„Éê","beef bowl":"„Éì„Éº„Éï„Éú„Ç¶„É´","sushi":"„Çπ„Ç∑","tempura":"„ÉÜ„É≥„Éó„É©",

  "coffee":"„Ç≥„Éº„Éí„Éº","tea":"„ÉÜ„Ç£„Éº","green tea":"„Ç∞„É™„Éº„É≥„ÉÜ„Ç£„Éº",
  "juice":"„Ç∏„É•„Éº„Çπ","soda":"„ÇΩ„Éº„ÉÄ","milk":"„Éü„É´„ÇØ","water":"„Ç¶„Ç©„Éº„Çø„Éº","mineral water":"„Éü„Éç„É©„É´„Ç¶„Ç©„Éº„Çø„Éº",

  "cake":"„Ç±„Éº„Ç≠","donut":"„Éâ„Éº„Éä„ÉÑ","parfait":"„Éë„Éï„Çß","pudding":"„Éó„É™„É≥",
  "ice cream":"„Ç¢„Ç§„Çπ„ÇØ„É™„Éº„É†","shaved ice":"„Ç∑„Çß„Ç§„Éñ„Éâ„Ç¢„Ç§„Çπ","chocolate":"„ÉÅ„Éß„Ç≥„É¨„Éº„Éà",
  "cream puff":"„Ç∑„É•„Éº„ÇØ„É™„Éº„É†","popcorn":"„Éù„ÉÉ„Éó„Ç≥„Éº„É≥","potato chips":"„Éù„ÉÜ„Éà„ÉÅ„ÉÉ„Éó„Çπ"
};

/* ========= „É°„Éã„É•„ÉºÂêç„É™„Çπ„Éà ========= */
const foodNames = [
  "rice","rice ball","curry and rice","grilled eel","grilled fish",
  "bread","sandwich","pancake","pizza","hamburger",
  "hot dog","French fries","fried chicken","sausage","steak",
  "omelet","spaghetti","pie","salad","soup",
  "fried noodles","ramen","soba","beef bowl","sushi","tempura"
];
const drinkNames = [
  "coffee","tea","green tea","juice","soda",
  "milk","water","mineral water"
];
const dessertNames = [
  "cake","donut","parfait","pudding","ice cream",
  "shaved ice","chocolate","cream puff","popcorn","potato chips"
];

/* ========= ÂêçÂâç ‚Üí ÁîªÂÉè„Éï„Ç°„Ç§„É´Âêç ========= */
function imgPath(type, name) {
  const norm = name.toLowerCase().replace(/ /g, "_");
  return `img/${type}_${norm}.png`;
}

/* ÈÖçÂàó„Çí„Ç™„Éñ„Ç∏„Çß„ÇØ„ÉàÂåñÔºàname, kana, imgÔºâ */
const foods = foodNames.map(n => ({
  name: n,
  kana: reading[n] || "",
  img: imgPath("food", n)
}));
const drinks = drinkNames.map(n => ({
  name: n,
  kana: reading[n] || "",
  img: imgPath("drink", n)
}));
const desserts = dessertNames.map(n => ({
  name: n,
  kana: reading[n] || "",
  img: imgPath("dessert", n)
}));

/* ========= ÂÄ§ÊÆµ ========= */
const priceItems = [100,150,200,250,300,350,400,450,500,600,700,800,900,1000];
const priceReading = {
  100:  "„ÉØ„É≥„Éè„É≥„Éâ„É¨„ÉÉ„Éâ„Ç®„É≥",
  150:  "„ÉØ„É≥„Éè„É≥„Éâ„É¨„ÉÉ„Éâ„Éï„Ç£„Éï„ÉÜ„Ç£„Éº„Ç®„É≥",
  200:  "„Éà„Ç•„Éº„Éè„É≥„Éâ„É¨„ÉÉ„Éâ„Ç®„É≥",
  250:  "„Éà„Ç•„Éº„Éè„É≥„Éâ„É¨„ÉÉ„Éâ„Éï„Ç£„Éï„ÉÜ„Ç£„Éº„Ç®„É≥",
  300:  "„Çπ„É™„Éº„Éè„É≥„Éâ„É¨„ÉÉ„Éâ„Ç®„É≥",
  350:  "„Çπ„É™„Éº„Éè„É≥„Éâ„É¨„ÉÉ„Éâ„Éï„Ç£„Éï„ÉÜ„Ç£„Éº„Ç®„É≥",
  400:  "„Éï„Ç©„Éº„Éè„É≥„Éâ„É¨„ÉÉ„Éâ„Ç®„É≥",
  450:  "„Éï„Ç©„Éº„Éè„É≥„Éâ„É¨„ÉÉ„Éâ„Éï„Ç£„Éï„ÉÜ„Ç£„Éº„Ç®„É≥",
  500:  "„Éï„Ç°„Ç§„Éñ„Éè„É≥„Éâ„É¨„ÉÉ„Éâ„Ç®„É≥",
  600:  "„Ç∑„ÉÉ„ÇØ„Çπ„Éè„É≥„Éâ„É¨„ÉÉ„Éâ„Ç®„É≥",
  700:  "„Çª„Éñ„É≥„Éè„É≥„Éâ„É¨„ÉÉ„Éâ„Ç®„É≥",
  800:  "„Ç®„Ç§„Éà„Éè„É≥„Éâ„É¨„ÉÉ„Éâ„Ç®„É≥",
  900:  "„Éä„Ç§„É≥„Éè„É≥„Éâ„É¨„ÉÉ„Éâ„Ç®„É≥",
  1000: "„ÉØ„É≥„Çµ„Ç¶„Ç∂„É≥„Éâ„Ç®„É≥"
};

/* ========= „Çπ„É≠„ÉÉ„ÉàÂõûËª¢Âá¶ÁêÜ ========= */
function spinImageReel(list, imgEl, textEl) {
  let count = 0;
  const maxCount = 20;
  const timer = setInterval(() => {
    const item = list[Math.floor(Math.random()*list.length)];
    imgEl.src = item.img;
    textEl.textContent = item.name + "\n" + item.kana;
    playKorokoro();
    count++;
    if (count >= maxCount) {
      clearInterval(timer);
      playChiin();
    }
  }, 80);
}

function spinPrice() {
  let count = 0;
  const maxCount = 20;
  const priceBox = document.getElementById("priceBox");
  const priceReadingBox = document.getElementById("priceReading");
  const timer = setInterval(() => {
    const p = priceItems[Math.floor(Math.random()*priceItems.length)];
    priceBox.textContent = p + " yen";
    priceReadingBox.textContent = priceReading[p] || "";
    playKorokoro();
    count++;
    if (count >= maxCount) {
      clearInterval(timer);
      playChiin();
    }
  }, 80);
}

/* ========= SPIN ALL ========= */
const foodImg     = document.getElementById("foodImg");
const foodText    = document.getElementById("foodText");
const drinkImg    = document.getElementById("drinkImg");
const drinkText   = document.getElementById("drinkText");
const dessertImg  = document.getElementById("dessertImg");
const dessertText = document.getElementById("dessertText");

document.getElementById("spinAllBtn").addEventListener("click", () => {
  spinImageReel(foods,    foodImg,    foodText);
  spinImageReel(drinks,   drinkImg,   drinkText);
  spinImageReel(desserts, dessertImg, dessertText);
  spinPrice();
});

// ÂàùÊúüË°®Á§∫
(function initOnce(){
  const f = foods[0];
  const d = drinks[0];
  const ds = desserts[0];
  foodImg.src = f.img;   foodText.textContent    = f.name + "\n" + f.kana;
  drinkImg.src = d.img;  drinkText.textContent   = d.name + "\n" + d.kana;
  dessertImg.src = ds.img; dessertText.textContent = ds.name + "\n" + ds.kana;
  const p = priceItems[0];
  document.getElementById("priceBox").textContent = p + " yen";
  document.getElementById("priceReading").textContent = priceReading[p];
})();
</script>

</body>
</html>
